ength+") to request"),i&&a.length>1&&(this.logger.warn("Too many other members ("+a.length+") in federated chat. Only the first one will be used"),a=[_.head(a)]),r=(i?this.peopleService.searchFederatedUsersByMri(a,"chat-titles-service-build-from-profile"):this.usersFromConversationsStore(a,e.id)).then(function(t){if(t&&t.length===a.length)o.stop();else{var i=a,r=_.map(t,function(e){return e.mri});o.fail({description:"number of requested users does not match number of returned user profiles",numRequestedUsers:i.length,numReceivedProfiles:r.length}),n.logger.warn("number of requested users does not match number of returned user profiles. number requested: "+i.length+", number received: "+r.length)}return s.dictionary=n.buildNameHintsFromProfiles(e,t),s.areAllValid=t&&!!t.length,s.areAllValid&&n.conversationsService.updateNameHints(e.id,s.dictionary),t},function(e){var t=n.utilityService.getErrorLoggingString(e);o.fail({description:"peopleService rejected the promise",error:t}),n.logger.warn("failed obtaining data from federated profile API/conversation store "+t)})}return r.then(function(i){return n.buildMemberTitles(i,!!e&&!!e.members&&!!i&&e.members.length!==i.length).then(function(n){return n&&{longTitle:n.longTitle,shortTitle:n.shortTitle,names:e&&e.members&&2===e.members.length?s.dictionary:null,pictureMembers:t.getChatMembersForProfilePicture(i)}})})},t.prototype.usersFromConversationsStore=function(e,t){var i=this,n=[],r=[],s=this.$translate.instant(this.resources.strings.guest_user_postfix);return _.forEach(e,function(e){var t=i.conversationsStore.users[e];if(t){var a=_.assign({mri:t.mri},t,{guestlessDisplayName:t.displayName});t.type===i.constants.userTypes.guest&&(a.displayName=t.displayName+" "+s),r.push(a)}else n.push(e)}),n.length>0?this.getUserProfilesFromConversation(n,t,"chat-titles-service-from-con